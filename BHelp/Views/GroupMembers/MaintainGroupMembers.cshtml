@model BHelp.ViewModels.GroupMemberViewModel
@{Layout = null; }
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Maintain Group Members</title>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    @*var _size =@Model.GroupMemberSelectList.Count*@
</head>
<body>
    <b>@Html.Label("Maintain Group Members for " + Model.SelectedGroupName)</b>
<div>

    @if (Model.GroupMemberSelectList.Count > 0)
    {
        <table>
            @for (int i = 0; i < Model.GroupMemberSelectList.Count; i++)
            {
            <tr>
                <td>@Model.GroupMemberSelectList[i].Text</td>
                <td>
                @Html.ActionLink("Remove", "Delete",
                    new
                    {
                        id = Model.GroupMemberSelectList[i].Value,
                        nameId = Model.NameId})
                </td>
            </tr>
            }
        </table>
    }
    
    <table>
        <tr>
            <td>
            <b>@Html.Label("Add Member: ") </b>
            @Html.DropDownListFor(m => m.SelectedClientId,
                new SelectList(Model.AllClients, "Value", "Text"),
                new { id = "ClientDDL" })
            </td>
        </tr>
    </table>
</div>
    <br />
<div>
    @*@Html.ActionLink("Add New Group Member", "AddGroupMember")
    <br />*@
    @Html.ActionLink("Back To Group List", "Index")
    <br/>
    @Html.ActionLink("Return to Dashboard", "Index", "Home", new { }, null)
</div>
</body>
</html>

<script type="text/javascript">
    $('#ClientDDL').change(function () {
        var mbrId = window.$(this).val();
        var gpId = @Model.SelectedGroupId;
        var link = '@Url.Action("AddGroupMember", "GroupMembers",
                         new {  clientId="-2"})';
        link = link.replace("-1", gpId);  
        link = link.replace("-2", mbrId);
        window.location.href = link;
    });
</script>
