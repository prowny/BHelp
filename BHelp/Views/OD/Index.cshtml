@using System.Web.Mvc.Html
@using DocumentFormat.OpenXml.Drawing.Charts
@using DocumentFormat.OpenXml.Wordprocessing

@model IEnumerable<BHelp.ViewModels.HouseholdViewModel>
@{
    Layout = null;
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <style>
        p.indent {padding-left: 1em}
        div {padding-left: 10px}
    </style>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <link rel="stylesheet" href="~/Content/themes/base/jquery-ui.min.css" /> @*// for date-picker*@
    @*Put page javascript in a separate .js file where breaks can be set during debugging:*@
    <script src="@Url.Content("/Scripts/BHelpFunctions.js")"></script>
</head>

<body>
<h3>Call Log</h3>
    <div id="Header">
        <table class="table">
            <tr>
                <td><b>OD Name:</b>&nbsp;@Session["CurrentUserFullName"]</td>
                <td>&nbsp;&nbsp;<b>Delivery Date:</b></td>
                <td>
                    @Html.TextBox("Delivery Date", @Session["CallLogDate"].ToString(),
                    new { id = "CallLogDate", style = "width: 75px;" })
                    <span style="color:darkmagenta">&#8592;Click to change</span>
                </td> @*Html left-arrow*@
            <tr>
        </table>
        <table>
            <tr>
                <td><b>Search for Client:</b></td>
                <td>
                    @*<input type="text" id="searchField" name="searchFieldText" size="8" />*@
                    @Html.TextBox("SearchText", "", new
                    { id = "SearchText", style = "width: 50px;",
                    Title = "Tip: Enter full or partial Phone# OR First Name OR Last Name."})
                    @*@Html.ActionLink("Search", "SearchHouseholds", "OD", null, new { id = "myLink" })*@
                    </td>
                <td>
                    @*<input type="submit" style="color: black; background-color: lightblue" value="Search" onclick="submitClick()"/>*@
                    <a href="#" id="SearchClients">Search</a>
                    @*<a href=@Url.Action( "Index","OD"  , new{searchString =model.s})><span>Search</span></a>*@
                    @Html.Hidden("RedirectToSearch", Url.Action("Index", "OD"));
                </td>
             </tr>
        </table>

        @*<b>Search for Client:</b>
            <input type="text" id="searchstring"/>
            <input type="button" id="btnGet" value="Search" />*@

        @*<div>
                  @Html.Label(“Enter Your Name”)
                  @Html.TextBox(“txtName“,"")
                  <input type=”submit” id=”btnSubmit” name=”Submit” />
            </div>*@
    <p>
        @* @Html.ActionLink("Create New", "Create")*@
    </p>
    </div>
    <div id="SearchResults" style="display: none">
        <table class="table">
            <tr>
                <th>
                    <div style="width: 100px"> @Html.DisplayNameFor(model => model.LastName)</div>
                </th>
                <th>
                    <div style="width: 100px"> @Html.DisplayNameFor(model => model.FirstName)</div>
                </th>
                <th>
                    <div style="width: 50px">@Html.DisplayNameFor(model => model.StreetNumber)</div>
                </th>
                <th>@Html.DisplayNameFor(model => model.StreetName)</th>
                <th>
                    <div style="width: 100px"> @Html.DisplayNameFor(model => model.City)</div>
                </th>
                <th>@Html.DisplayNameFor(model => model.Zip)</th>
                <th>
                    <div style="width: 100px"> @Html.DisplayNameFor(model => model.Phone)</div>
                </th>
                <th>@Html.DisplayNameFor(model => model.FamilyMembers)</th>
                <th>
                    <div style="width: 60px"> @Html.DisplayNameFor(model => model.Notes)</div>
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <div style="width: 100px"> @Html.DisplayFor(modelItem => item.FirstName) </div>
                    </td>
                    <td>
                        <div style="width: 100px"> @Html.DisplayFor(modelItem => item.LastName) </div>
                    </td>
                    <td>@Html.DisplayFor(modelItem => item.StreetNumber)</td>
                    <td title=@item.StreetToolTip>
                        @Html.DisplayFor(modelItem => item.StreetName)
                    </td>
                    <td title=@item.CityToolTip>
                        @Html.DisplayFor(modelItem => item.City)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Zip)
                    </td>
                    <td title=@item.PhoneToolTip>
                        @Html.DisplayFor(modelItem => item.Phone)
                    </td>
                    @*Use Phone as dummy string for display-only DropDownList*@
                    <td>@Html.DropDownListFor(modelitem => item.Phone, new SelectList(item.FamilyMembers, "Value", "Text"), new { style = "width: 120px" })</td>
                    <td title=@item.NotesToolTip>
                        @*The length of the tool tip message depends on the browser.*@
                        @Html.DisplayFor(modelItem => item.Notes)
                    </td>
                    @* <td><div style="width : 40px"> @Html.ActionLink("Edit", "Edit", new { id = item.ClientId })</div></td>*@
                </tr>
            }
        </table>
    </div>
    <br />
    <div>
        @Html.ActionLink("Return to Dashboard", "ReturnToDashboard", new { })
    </div>
</body>
</html>

<script>
    $(function () {
        window.$("#CallLogDate").datepicker();
    });
</script> @*//CallLogDate datepicker*@
<script type="text/javascript">
    $("#CallLogDate").change(function () {
        UpdateCallLogDate(window.$('#CallLogDate').val());
    });
</script> @*// CallLogDate change*@
@*<script>
        function submitClick()
        {
            $.ajax({
                url: "../OD/SearchHouseholds?searchString=" + $('#searchField').val(),
                type: "GET",
                success: function (data) {
                    //debugger;
                    // your custom code
                    location.reload(true);
                }
            });
        }
    </script>*@
<script type="text/javascript">
    $("#SearchClients").click(function () {
        var text = $("#SearchText");
        SearchClients(text);
    });
</script>
